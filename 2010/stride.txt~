From MAILER-DAEMON Fri Oct  8 15:24:05 2010
Date: 08 Oct 2010 15:24:05 +0200
From: Mail System Internal Data <MAILER-DAEMON@psi.ch>
Subject: DON'T DELETE THIS MESSAGE -- FOLDER INTERNAL DATA
Message-ID: <1286544245@psi.ch>
X-IMAP: 1286544212 0000000002
Status: RO

This text is part of the internal format of your mail folder, and is not
a real message.  It is created automatically by the mail system software.
If deleted, important folder data will be lost, and it will be re-created
with the data reset to initial values.

From koenneck@psi.ch Thu Oct  7 22:34:58 2010 +0200
Received: from MAILGATEWAY02.psi.ch ([129.129.191.38]) by MAILBOX0A.psi.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 7 Oct 2010 22:34:58 +0200
Received: from esa01-i.psi.ch ([192.33.126.41]) by MAILGATEWAY02.psi.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 7 Oct 2010 22:34:58 +0200
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AkoCACrLrUxdXw1fgWdsb2JhbACUQo4UAQELBwQKBxEiuwCCGoMtBIlSboMIEA
X-IronPort-AV: E=Sophos;i="4.57,298,1283724000"; 
   d="scan'208";a="36344033"
Received: from engine19-1277-3.icritical.com ([93.95.13.95])
  by esa01.psi.ch with SMTP; 07 Oct 2010 22:34:58 +0200
Received: (qmail 26766 invoked from network); 7 Oct 2010 20:34:57 -0000
Received: from localhost (127.0.0.1)
  by engine19-1277-3.icritical.com with SMTP; 7 Oct 2010 20:34:57 -0000
Return-Path: <>
Delivered-To: clean-quarantine
X-Envelope-From: <nexus-committee-bounces@nexusformat.org>
X-Envelope-To: <Mark.Koennecke@psi.ch>
Received: from engine19-1277-3.icritical.com ([127.0.0.1])
 by localhost (engine19-1277-3.icritical.com [127.0.0.1]) (amavisd-new, port 10024)
 with SMTP id 24591-06 for <Mark.Koennecke@psi.ch>;
 Thu,  7 Oct 2010 21:34:56 +0100 (BST)
Received: (qmail 26759 invoked by uid 599); 7 Oct 2010 20:34:56 -0000
Received: from unknown (HELO exchhub03.rl.ac.uk) (130.246.236.9)
    by engine19-1277-3.icritical.com (qpsmtpd/0.28) with ESMTP; Thu, 07 Oct 2010 21:34:56 +0100
Received: from exchangegw1.rl.ac.uk (172.16.133.40) by
 exchhub01.fed.cclrc.ac.uk (130.246.236.17) with Microsoft SMTP Server id
 14.0.702.0; Thu, 7 Oct 2010 21:34:54 +0100
Received: from shadow.nd.rl.ac.uk ([130.246.39.141]) by exchangegw1.rl.ac.uk
 with Microsoft SMTPSVC(6.0.3790.4675);	 Thu, 7 Oct 2010 21:34:54 +0100
Received: from shadow.nd.rl.ac.uk (localhost [127.0.0.1])	by
 shadow.nd.rl.ac.uk (8.14.4/8.14.3) with ESMTP id o97KYqrN006094;	Thu, 7 Oct
 2010 21:34:52 +0100
Received: from mx1.net.stfc.ac.uk (mx1.net.stfc.ac.uk [130.246.135.223])	by
 shadow.nd.rl.ac.uk (8.14.4/8.14.3) with ESMTP id o97KTVBl020077	for
 <nexus-committee@nexusformat.org>; Thu, 7 Oct 2010 21:29:32 +0100
X-RAL-MFrom: <y8y@jeeem.ornl.gov>
X-RAL-Connect: <emroute3.ornl.gov [160.91.4.110]>
Received: from emroute3.ornl.gov (emroute3.ornl.gov [160.91.4.110])	by
 mx1.net.stfc.ac.uk (8.13.1/8.13.1) with ESMTP id o97KTD64022867	for
 <nexus-committee@nexusformat.org>; Thu, 7 Oct 2010 21:29:16 +0100
Received: from emroute3.ornl.gov ([127.0.0.1])	by emroute3.ornl.gov (PMDF
 V6.5-x1 #31823)	with ESMTP id <0L9X00CGNSWOV4@emroute3.ornl.gov> for
	nexus-committee@nexusformat.org; Thu, 07 Oct 2010 16:29:13 -0400 (EDT)
Received: from CONVERSION-DAEMON.emroute3.ornl.gov by emroute3.ornl.gov	(PMDF
 V6.5-x1 #31823) id <0L9X00D01SWOYG@emroute3.ornl.gov> for
	nexus-committee@nexusformat.org; Thu, 07 Oct 2010 16:29:12 -0400 (EDT)
Received: from jeeem.ornl.gov (jeeem.ornl.gov [160.91.234.171])	by
 emroute3.ornl.gov (PMDF V6.5-x1 #31823)	with ESMTP id
 <0L9X00D0HSWOXX@emroute3.ornl.gov> for	nexus-committee@nexusformat.org; Thu,
 07 Oct 2010 16:29:12 -0400 (EDT)
Received: by jeeem.ornl.gov (Postfix, from userid 30729)	id 49160101A7; Thu,
	07 Oct 2010 16:29:12 -0400 (EDT)
Date: Thu, 7 Oct 2010 16:29:12 -0400
From: James Arthur Kohl <kohlja@ornl.gov>
To: <nexus-committee@nexusformat.org>
Message-ID: <20101007202912.GA27796@jeeem.ornl.gov>
MIME-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.4.2.2i
X-CCLRC-SPAM-report: -2.599 : BAYES_00
X-Scanned-By: MIMEDefang 2.61 on 130.246.135.223
X-Mailman-Approved-At: Thu, 07 Oct 2010 21:34:50 +0100
Subject: [NeXus-committee] Stride & Offset Approach to MultiDim Array
	Storage Order... :-)
X-BeenThere: nexus-committee@nexusformat.org
X-Mailman-Version: 2.1.12
Precedence: list
Reply-To: <kohlja@ornl.gov>
List-Id: Discussions of the NeXus Advisory Committee
	<nexus-committee.nexusformat.org>
List-Unsubscribe: <http://lists.nexusformat.org/mailman/options/nexus-committee>, 
	<mailto:nexus-committee-request@nexusformat.org?subject=unsubscribe>
List-Archive: <http://lists.nexusformat.org/pipermail/nexus-committee/>
List-Post: <mailto:nexus-committee@nexusformat.org>
List-Help: <mailto:nexus-committee-request@nexusformat.org?subject=help>
List-Subscribe: <http://lists.nexusformat.org/mailman/listinfo/nexus-committee>,
	<mailto:nexus-committee-request@nexusformat.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: <nexus-committee-bounces@nexusformat.org>
Errors-To: nexus-committee-bounces@nexusformat.org
X-OriginalArrivalTime: 07 Oct 2010 20:34:54.0325 (UTC) FILETIME=[19570250:01CB665F]
X-Virus-Scanned: by iCritical at engine19-1277-3.icritical.com
Status: R
X-Status: 
X-Keywords:                  
X-UID: 1

O.K., here goes.  :-D  (I hope I didn't screw this up... :-D)

Enjoy!
	Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

---------

NeXus "Strides" Specification Example/Proposal
	a la Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

In working through the examples below, it occurred to me
that we probably need an "offset[]" to go along with the
"stride[]" array, to indicate where to find the "1st" element
along each axis...  :-)

1-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9
      size[1] = { 10 }  // assume uniform overall array dimensions

   * default stride:
      stride[1] = { 1 }
      offset[1] = { 0 }
      for i:
         result[i]:
            0 1 2 3 4 5 6 7 8 9

   * reverse stride:
      stride[1] = { -1 }
      offset[1] = { 9 }
      for i:
         result[i]:
            9 8 7 6 5 4 3 2 1 0

2-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
      size[2] = { 4, 5 }  // assume uniform overall array dimensions

   * row major (C) stride:
      stride[2] = { 5, 1 }
      offset[2] = { 0, 0 }
      for i:
         for j:
            result[i][j]:
               0 1 2 3 4
               5 6 7 8 9
               10 11 12 13 14
               15 16 17 18 19

   * column major (Fortran) stride:
      stride[2] = { 1, 4 }
      offset[2] = { 0, 0 }
      for i:
         for j:
            result[i][j]:
               0 4 8 12 16
               1 5 9 13 17
               2 6 10 14 18
               3 7 11 15 19

   * "crazy reverse" row major (C) stride:
      stride[2] = { -5, -1 }
      offset[2] = { 4, 5 }
      for i:
         for j:
            result[i][j]:
               19 18 17 16 15
               14 13 12 11 10
               9 8 7 6 5
               4 3 2 1 0

3-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
         20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
         40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59
      size[3] = { 3, 4, 5 }  // assume uniform overall array dimensions

   * row major (C) stride:
      stride[3] = { 20, 5, 1 }
      offset[3] = { 0, 0, 0 }
      for i:
         for j:
            for k:
               result[i][j][k]:
                  0 1 2 3 4
                  5 6 7 8 9
                  10 11 12 13 14
                  15 16 17 18 19

                  20 21 22 23 24
                  25 26 27 28 29
                  30 31 32 33 34
                  35 36 37 38 39

                  40 41 42 43 44
                  45 46 47 48 49
                  50 51 52 53 54
                  55 56 57 58 59

   * column major (Fortran) stride:
      stride[3] = { 1, 5, 15 }
      offset[3] = { 0, 0, 0 }
      for i:
         for j:
            for k:
               result[i][j][k]:
                  0 15 30 45
                  5 20 35 50
                  10 25 40 55

                  1 16 31 46
                  6 21 36 51
                  11 26 41 56

                  2 17 32 47
                  7 22 37 52
                  12 27 42 57

                  3 18 33 48
                  8 23 38 53
                  13 28 43 58

                  4 19 34 49
                  9 24 39 54
                  14 29 44 59

I could do a "crazy" 3-D example, but my brain already hurts...  :-}

Enjoy!  :-D

	Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

_______________________________________________
NeXus-committee mailing list
NeXus-committee@nexusformat.org
http://lists.nexusformat.org/mailman/listinfo/nexus-committee

From koenneck@psi.ch Thu Oct  7 22:43:27 2010 +0200
Received: from MAILGATEWAY01.psi.ch ([129.129.191.37]) by MAILBOX0A.psi.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 7 Oct 2010 22:43:27 +0200
Received: from esa01-i.psi.ch ([192.33.126.41]) by MAILGATEWAY01.psi.ch with Microsoft SMTPSVC(6.0.3790.4675);
	 Thu, 7 Oct 2010 22:43:27 +0200
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AhQCAHbNrUxdXw39gWdsb2JhbACiVgEBCwcECgcRIrsoghqDLQSJUm6DCBA
X-IronPort-AV: E=Sophos;i="4.57,298,1283724000"; 
   d="scan'208";a="36344583"
Received: from engine19-1277-1.icritical.com ([93.95.13.253])
  by esa01.psi.ch with SMTP; 07 Oct 2010 22:43:26 +0200
Received: (qmail 18349 invoked from network); 7 Oct 2010 20:43:23 -0000
Received: from localhost (127.0.0.1)
  by engine19-1277-1.icritical.com with SMTP; 7 Oct 2010 20:43:23 -0000
Return-Path: <>
Delivered-To: clean-quarantine
X-Envelope-From: <nexus-committee-bounces@nexusformat.org>
X-Envelope-To: <Mark.Koennecke@psi.ch>
Received: from engine19-1277-1.icritical.com ([127.0.0.1])
 by localhost (engine19-1277-1.icritical.com [127.0.0.1]) (amavisd-new, port 10024)
 with SMTP id 17317-05 for <Mark.Koennecke@psi.ch>;
 Thu,  7 Oct 2010 21:43:23 +0100 (BST)
Received: (qmail 18324 invoked by uid 599); 7 Oct 2010 20:43:23 -0000
Received: from unknown (HELO exchhub03.rl.ac.uk) (130.246.236.11)
    by engine19-1277-1.icritical.com (qpsmtpd/0.28) with ESMTP; Thu, 07 Oct 2010 21:43:23 +0100
Received: from exchangegw1.rl.ac.uk (172.16.133.40) by
 EXCHHUB03.fed.cclrc.ac.uk (130.246.236.18) with Microsoft SMTP Server id
 14.0.702.0; Thu, 7 Oct 2010 21:43:23 +0100
Received: from shadow.nd.rl.ac.uk ([130.246.39.141]) by exchangegw1.rl.ac.uk
 with Microsoft SMTPSVC(6.0.3790.4675);	 Thu, 7 Oct 2010 21:43:22 +0100
Received: from shadow.nd.rl.ac.uk (localhost [127.0.0.1])	by
 shadow.nd.rl.ac.uk (8.14.4/8.14.3) with ESMTP id o97KhLEc026776;	Thu, 7 Oct
 2010 21:43:21 +0100
Received: from mx1.net.stfc.ac.uk (mx1.net.stfc.ac.uk [130.246.135.223])	by
 shadow.nd.rl.ac.uk (8.14.4/8.14.3) with ESMTP id o97KdiPP003717	for
 <nexus-committee@nexusformat.org>; Thu, 7 Oct 2010 21:39:44 +0100
X-RAL-MFrom: <y8y@jeeem.ornl.gov>
X-RAL-Connect: <emroute3.ornl.gov [160.91.4.110]>
Received: from emroute3.ornl.gov (emroute3.ornl.gov [160.91.4.110])	by
 mx1.net.stfc.ac.uk (8.13.1/8.13.1) with ESMTP id o97KdUFA024108	for
 <nexus-committee@nexusformat.org>; Thu, 7 Oct 2010 21:39:32 +0100
Received: from emroute3.ornl.gov ([127.0.0.1])	by emroute3.ornl.gov (PMDF
 V6.5-x1 #31823)	with ESMTP id <0L9X00DN9TDT9I@emroute3.ornl.gov> for
	nexus-committee@nexusformat.org; Thu, 07 Oct 2010 16:39:29 -0400 (EDT)
Received: from CONVERSION-DAEMON.emroute3.ornl.gov by emroute3.ornl.gov	(PMDF
 V6.5-x1 #31823) id <0L9X00F01TDT33@emroute3.ornl.gov> for
	nexus-committee@nexusformat.org; Thu, 07 Oct 2010 16:39:29 -0400 (EDT)
Received: from jeeem.ornl.gov (jeeem.ornl.gov [160.91.234.171])	by
 emroute3.ornl.gov (PMDF V6.5-x1 #31823)	with ESMTP id
 <0L9X00E4WTDTVJ@emroute3.ornl.gov> for	nexus-committee@nexusformat.org; Thu,
 07 Oct 2010 16:39:29 -0400 (EDT)
Received: by jeeem.ornl.gov (Postfix, from userid 30729)	id 79816101A7; Thu,
	07 Oct 2010 16:39:29 -0400 (EDT)
Date: Thu, 7 Oct 2010 16:39:29 -0400
From: James Arthur Kohl <kohlja@ornl.gov>
In-Reply-To: <20101007202912.GA27796@jeeem.ornl.gov>
To: "nexus-committee@nexusformat.org" <nexus-committee@nexusformat.org>
Message-ID: <20101007203929.GA28100@jeeem.ornl.gov>
MIME-Version: 1.0
Content-Disposition: inline
User-Agent: Mutt/1.4.2.2i
References: <20101007202912.GA27796@jeeem.ornl.gov>
X-CCLRC-SPAM-report: -2.599 : BAYES_00
X-Scanned-By: MIMEDefang 2.61 on 130.246.135.223
X-Mailman-Approved-At: Thu, 07 Oct 2010 21:43:20 +0100
Subject: Re: [NeXus-committee] Stride & Offset Approach to MultiDim Array
	Storage Order... :-)
X-BeenThere: nexus-committee@nexusformat.org
X-Mailman-Version: 2.1.12
Precedence: list
Reply-To: <kohlja@ornl.gov>
List-Id: Discussions of the NeXus Advisory Committee
	<nexus-committee.nexusformat.org>
List-Unsubscribe: <http://lists.nexusformat.org/mailman/options/nexus-committee>, 
	<mailto:nexus-committee-request@nexusformat.org?subject=unsubscribe>
List-Archive: <http://lists.nexusformat.org/pipermail/nexus-committee/>
List-Post: <mailto:nexus-committee@nexusformat.org>
List-Help: <mailto:nexus-committee-request@nexusformat.org?subject=help>
List-Subscribe: <http://lists.nexusformat.org/mailman/listinfo/nexus-committee>,
	<mailto:nexus-committee-request@nexusformat.org?subject=subscribe>
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
Sender: <nexus-committee-bounces@nexusformat.org>
Errors-To: nexus-committee-bounces@nexusformat.org
X-OriginalArrivalTime: 07 Oct 2010 20:43:22.0187 (UTC) FILETIME=[480C99B0:01CB6660]
X-Virus-Scanned: by iCritical at engine19-1277-1.icritical.com
Status: R
X-Status: 
X-Keywords:                  
X-UID: 2

Oops...  I *did* screw up, the 3-D Column Major example changed the
assumed array size...  :-}

Sorry!  :-}  Too late in the day for storage order I guess...  :-b

Here's a fixed version of the examples.

	Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

---------

NeXus "Strides" Specification Example/Proposal
	a la Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

In working through the examples below, it occurred to me
that we probably need an "offset[]" to go along with the
"stride[]" array, to indicate where to find the "1st" element
along each axis...  :-)

1-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9
      size[1] = { 10 }  // assume uniform overall array dimensions

   * default stride:
      stride[1] = { 1 }
      offset[1] = { 0 }
      for i:
         result[i]:
            0 1 2 3 4 5 6 7 8 9

   * reverse stride:
      stride[1] = { -1 }
      offset[1] = { 9 }
      for i:
         result[i]:
            9 8 7 6 5 4 3 2 1 0

2-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
      size[2] = { 4, 5 }  // assume uniform overall array dimensions

   * row major (C) stride:
      stride[2] = { 5, 1 }
      offset[2] = { 0, 0 }
      for i:
         for j:
            result[i][j]:
               0 1 2 3 4
               5 6 7 8 9
               10 11 12 13 14
               15 16 17 18 19

   * column major (Fortran) stride:
      stride[2] = { 1, 4 }
      offset[2] = { 0, 0 }
      for i:
         for j:
            result[i][j]:
               0 4 8 12 16
               1 5 9 13 17
               2 6 10 14 18
               3 7 11 15 19

   * "crazy reverse" row major (C) stride:
      stride[2] = { -5, -1 }
      offset[2] = { 4, 5 }
      for i:
         for j:
            result[i][j]:
               19 18 17 16 15
               14 13 12 11 10
               9 8 7 6 5
               4 3 2 1 0

3-D:
----

   * raw data = 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19
         20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39
         40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59
      size[3] = { 3, 4, 5 }  // assume uniform overall array dimensions

   * row major (C) stride:
      stride[3] = { 20, 5, 1 }
      offset[3] = { 0, 0, 0 }
      for i:
         for j:
            for k:
               result[i][j][k]:
                  0 1 2 3 4
                  5 6 7 8 9
                  10 11 12 13 14
                  15 16 17 18 19

                  20 21 22 23 24
                  25 26 27 28 29
                  30 31 32 33 34
                  35 36 37 38 39

                  40 41 42 43 44
                  45 46 47 48 49
                  50 51 52 53 54
                  55 56 57 58 59

   * column major (Fortran) stride:
      stride[3] = { 1, 3, 12 }
      offset[3] = { 0, 0, 0 }
      for i:
         for j:
            for k:
               result[i][j][k]:
                  0 12 24 36 48
                  3 15 27 39 51
                  6 18 30 42 54
                  9 21 33 45 57

                  1 13 25 37 49
                  4 16 28 40 52
                  7 19 31 43 55
                  10 22 34 46 58

                  2 14 26 38 50
                  5 17 29 41 53
                  8 20 32 44 56
                  11 23 35 47 59

I could do a "crazy" 3-D example, but my brain already hurts...  :-}

Enjoy!  :-D

	Jeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeem ;)

_______________________________________________
NeXus-committee mailing list
NeXus-committee@nexusformat.org
http://lists.nexusformat.org/mailman/listinfo/nexus-committee

